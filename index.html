<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema de Pedidos</title>
  <style>
        body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    
    .container {
      max-width: 600px;
      margin: 0 auto;
    }

    .hidden {
      display: none;
    }

    .product {
      display: flex;
  flex-direction: column;
  align-items: center;
  margin: 20px; /* Espaçamento entre produtos */
  border: 1px solid #ddd; /* Adiciona uma borda ao produto */
  padding: 10px;
  border-radius: 8px; /* Arredondamento dos cantos */
  max-width: 200px; /* Limita a largura */
    }
    .product-image {
  width: 100px; 
  height: auto;
  margin-bottom: 10px; /* Espaço abaixo da imagem */
}
.product-name {
  font-weight: bold;
  display: block;
}

.product-price {
  color: #555;
  display: block;
}

.product-quantity {
  width: 60px;
  text-align: center;
}

    button {
      padding: 10px 20px;
      background-color: #4CAF50;
      color: white;
      border: none;
      cursor: pointer;
      margin-right: 10px;
    }

    button:hover {
      background-color: #45a049;
    }

    .back-button {
      background-color: #f44336;
    }

    .back-button:hover {
      background-color: #d32f2f;
    }

    #change-amount {
      font-weight: bold;
      margin-left: 10px;
    }

    .history-filter {
      margin-top: 20px;
    }

    .history-filter label {
      margin-right: 10px;
    }

    #sales-history {
      margin-top: 30px;
    }

    #copy-history {
      background-color: #008CBA;
    }

    #copy-history:hover {
      background-color: #007B9A;
    }

    .payment-summary {
      margin-top: 10px;
      font-weight: bold;
    }

    /* Consultas de mídia para ajustar o layout em dispositivos móveis */
@media (max-width: 768px) {
  /* Para telas menores que 768px (tablets em modo retrato e dispositivos móveis) */
  .container {
    max-width: 100%;
    padding: 10px;
  }

  .product {
    max-width: 100%; /* Produtos ocupando toda a largura da tela */
    margin: 10px 0; /* Menos espaçamento entre os produtos */
  }

  .product-image {
    width: 80px; /* Ajustar a largura das imagens */
  }

  .product-info {
    text-align: center;
  }
}

@media (max-width: 480px) {
  /* Para telas menores que 480px (smartphones em modo retrato) */
  .container {
    padding: 5px;
  }

  .product {
    margin: 10px 0;
  }

  .product-name {
    font-size: 14px; /* Ajusta o tamanho da fonte para dispositivos menores */
  }

  .product-price {
    font-size: 12px;
  }

  .product-quantity {
    width: 50px;
  }
}
  </style>
</head>
<body>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <div class="container">
    <h1>Sistema de Pedidos</h1>
    
    <!-- Lista de Produtos -->
    <div id="product-list">
      <h2>Na Brasa</h2>

<div class="product" data-id="1" data-name="Frango Assado inteiro" data-price="42">
  <img src="/Users/gustavocae/SISTEMA-SIMPLES/images/2926417-frango-assado-temperado-com-ervas-gratis-foto.jpg" 
       alt="Frango Assado Inteiro" 
       class="product-image">
  <div class="product-info">
    <span class="product-name">Frango Assado Inteiro</span>
    <span class="product-price">R$ 42.00</span>
  </div>
  <input type="number" min="0" placeholder="Quantidade" class="product-quantity">
</div>
<div class="product" data-id="2" data-name="Frango Assado banda" data-price="21">
  <img src="/Users/gustavocae/SISTEMA-SIMPLES/images/Frango-sem-fundo.png.webp" 
       alt="Frango Assado banda" 
       class="product-image">
  <div class="product-info">
    <span class="product-name">Frango Assado banda</span>
    <span class="product-price">R$ 21.00</span>
  </div>
  <input type="number" min="0" placeholder="Quantidade" class="product-quantity">
</div>

<div class="product" data-id="3" data-name="Linguica" data-price="3">
  <img src="/Users/gustavocae/SISTEMA-SIMPLES/images/Linguica-Toscana-com-Molho-de-Mostardas-e-Mel.jpg.webp" 
       alt="Linguica" 
       class="product-image">
  <div class="product-info">
    <span class="product-name">Linguica</span>
    <span class="product-price">R$ 3.00</span>
  </div>
  <input type="number" min="0" placeholder="Quantidade" class="product-quantity">
</div>

<div class="product" data-id="4" data-name="Peito de frango" data-price="6">
  <img src="/Users/gustavocae/SISTEMA-SIMPLES/images/peito-de-frango-grelhado.png" 
       alt="Peito de frango" 
       class="product-image">
  <div class="product-info">
    <span class="product-name">Peito de frango</span>
    <span class="product-price">R$ 6.00</span>
  </div>
  <input type="number" min="0" placeholder="Quantidade" class="product-quantity">
</div>
      

      <h2>Porções</h2>
      <div class="product" data-id="5" data-name="Macaxeira cremosa" data-price="10">
        <img src="/Users/gustavocae/SISTEMA-SIMPLES/images/macaxeira-cozida.jpg" 
             alt="Macaxeira cremosa" 
             class="product-image">
        <div class="product-info">
          <span class="product-name">Macaxeira cremosa</span>
          <span class="product-price">R$ 10.00</span>
        </div>
        <input type="number" min="0" placeholder="Quantidade" class="product-quantity">
      </div>

      <div class="product" data-id="6" data-name="Baiao" data-price="10">
        <img src="https://guiadacozinha.com.br/wp-content/uploads/2019/10/baiao-de-dois-pressao.jpg" 
             alt="Baiao" 
             class="product-image">
        <div class="product-info">
          <span class="product-name">Baiao</span>
          <span class="product-price">R$ 10.00</span>
        </div>
        <input type="number" min="0" placeholder="Quantidade" class="product-quantity">
      </div>
      
      <h2>Bebidas</h2>

      <div class="product" data-id="7" data-name="Garrafinha guaraná" data-price="10">
        <img src="/Users/gustavocae/SISTEMA-SIMPLES/images/197264-800-450.webp" 
             alt="Garrafinha guaraná" 
             class="product-image">
        <div class="product-info">
          <span class="product-name">Garrafinha guaraná</span>
          <span class="product-price">R$ 10.00</span>
        </div>
        <input type="number" min="0" placeholder="Quantidade" class="product-quantity">
      </div>

      <div class="product" data-id="8" data-name="Garrafinha pepsi" data-price="10">
        <img src="/Users/gustavocae/SISTEMA-SIMPLES/images/Refrigerante-PEPSI-Cola-Garrafinha-200ml.jpg.webp" 
             alt="Garrafinha pepsi" 
             class="product-image">
        <div class="product-info">
          <span class="product-name">Garrafinha pepsi</span>
          <span class="product-price">R$ 10.00</span>
        </div>
        <input type="number" min="0" placeholder="Quantidade" class="product-quantity">
      </div>

      <div class="product" data-id="9" data-name="Coca Cola 2.5L" data-price="10">
        <img src="/Users/gustavocae/SISTEMA-SIMPLES/images/images-6.jpeg" 
             alt="Coca Cola 2.5L" 
             class="product-image">
        <div class="product-info">
          <span class="product-name">Coca Cola 2.5L</span>
          <span class="product-price">R$ 10.00</span>
        </div>
        <input type="number" min="0" placeholder="Quantidade" class="product-quantity">
      </div>

      <div class="product" data-id="10" data-name="Pepsi 1L" data-price="10">
        <img src="/Users/gustavocae/SISTEMA-SIMPLES/images/images-7.jpeg" 
             alt="Pepsi 1L" 
             class="product-image">
        <div class="product-info">
          <span class="product-name">Pepsi 1L</span>
          <span class="product-price">R$ 10.00</span>
        </div>
        <input type="number" min="0" placeholder="Quantidade" class="product-quantity">
      </div>


      <button id="next-step">Finalizar Seleção</button>
    </div>
    
    <!-- Finalização de Pedido -->
    <div id="order-summary" class="hidden">
      <h2>Resumo do Pedido</h2>
      <div id="summary-details"></div>
      <div>
        <label for="payment-method">Forma de Pagamento:</label>
        <select id="payment-method">
          <option value="Dinheiro">Dinheiro</option>
          <option value="Cartão">Cartão</option>
          <option value="Pix">Pix</option>
        </select>
      </div>
      <div id="change-container" class="hidden">
        <label for="received-amount">Valor Recebido:</label>
        <input type="number" id="received-amount" min="0">
        <span id="change-amount"></span>
      </div>
      <button id="finalize-order">Concluir Pedido</button>
      <button id="back-to-products" class="back-button">Voltar</button>
    </div>
    
    <!-- Histórico de Vendas -->
    <div class="history-filter">
      <h2>Filtrar Histórico de Vendas</h2>
      <label for="filter-date">Selecione a Data:</label>
      <input type="date" id="filter-date">
      <button id="filter-history">Filtrar</button>
    </div>
    
    <div id="sales-history">
      <h2>Histórico de Vendas</h2>
      <div id="history-list"></div>
      <button id="copy-history">Copiar Histórico</button>
      <button id="clear-history">Limpar Histórico</button>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const products = document.querySelectorAll(".product");
      const nextStepButton = document.getElementById("next-step");
      const orderSummaryDiv = document.getElementById("order-summary");
      const productListDiv = document.getElementById("product-list");
      const summaryDetailsDiv = document.getElementById("summary-details");
      const paymentMethodSelect = document.getElementById("payment-method");
      const changeContainer = document.getElementById("change-container");
      const receivedAmountInput = document.getElementById("received-amount");
      const changeAmountSpan = document.getElementById("change-amount");
      const finalizeOrderButton = document.getElementById("finalize-order");
      const backToProductsButton = document.getElementById("back-to-products");
      const historyListDiv = document.getElementById("history-list");
      const filterDateInput = document.getElementById("filter-date");
      const copyHistoryButton = document.getElementById("copy-history");
      const clearHistoryButton = document.getElementById("clear-history");

      let cart = [];

      // Recuperar histórico de vendas do localStorage
      const loadSalesHistory = (filterDate = null) => {
        const salesHistory = JSON.parse(localStorage.getItem("salesHistory")) || [];
        let filteredHistory = salesHistory;

        if (filterDate) {
          filteredHistory = salesHistory.filter(order => order.date.startsWith(filterDate));
        }

        historyListDiv.innerHTML = filteredHistory.map(order => `
          <div>
            <strong>${order.date}</strong>
            <ul>
              ${order.items.map(item => `<li>${item.quantity}x ${item.name} - R$ ${item.price * item.quantity}</li>`).join('')}
            </ul>
            <strong>Total: R$ ${order.total}</strong>
            <p>Método de Pagamento: ${order.paymentMethod}</p>
          </div>
        `).join('');

        // Mostrar resumo do total
        showPaymentSummary(filteredHistory);
      };

      const showPaymentSummary = (salesHistory) => {
        const totalPix = salesHistory.filter(order => order.paymentMethod === 'Pix').reduce((sum, order) => sum + parseFloat(order.total), 0);
        const totalCard = salesHistory.filter(order => order.paymentMethod === 'Cartão').reduce((sum, order) => sum + parseFloat(order.total), 0);
        const totalCash = salesHistory.filter(order => order.paymentMethod === 'Dinheiro').reduce((sum, order) => sum + parseFloat(order.total), 0);

        const totalAll = totalPix + totalCard + totalCash;

        const summaryDiv = document.createElement("div");
        summaryDiv.classList.add("payment-summary");
        summaryDiv.innerHTML = `
          <p>Total de Vendas: R$ ${totalAll.toFixed(2)}</p>
          <p>Total Pix: R$ ${totalPix.toFixed(2)}</p>
          <p>Total Cartão: R$ ${totalCard.toFixed(2)}</p>
          <p>Total Dinheiro: R$ ${totalCash.toFixed(2)}</p>
        `;
        historyListDiv.appendChild(summaryDiv);
      };

      loadSalesHistory();

      // Filtrar histórico com base na data selecionada
      document.getElementById("filter-history").addEventListener("click", () => {
        const filterDate = filterDateInput.value;
        loadSalesHistory(filterDate);
      });

      // Mover para a tela de resumo
      nextStepButton.addEventListener("click", () => {
        cart = [];
        products.forEach((product) => {
          const id = product.dataset.id;
          const name = product.dataset.name;
          const price = parseFloat(product.dataset.price);
          const quantity = parseInt(product.querySelector("input").value) || 0;

          if (quantity > 0) {
            cart.push({ id, name, price, quantity });
          }
        });

        if (cart.length === 0) {
          alert("Selecione ao menos um produto!");
          return;
        }

        productListDiv.classList.add("hidden");
        orderSummaryDiv.classList.remove("hidden");

        displayOrderSummary();
      });

      // Mostrar resumo do pedido
      function displayOrderSummary() {
        summaryDetailsDiv.innerHTML = "";
        let total = 0;

        cart.forEach((item) => {
          const itemTotal = item.price * item.quantity;
          total += itemTotal;
          const itemSummary = document.createElement("div");
          itemSummary.textContent = `${item.quantity}x ${item.name} (R$ ${item.price.toFixed(2)}/un) - R$ ${itemTotal.toFixed(2)}`;
          summaryDetailsDiv.appendChild(itemSummary);
        });

        const totalSummary = document.createElement("div");
        totalSummary.innerHTML = `<strong>Total: R$ ${total.toFixed(2)}</strong>`;
        summaryDetailsDiv.appendChild(totalSummary);
      }

      // Seleção do método de pagamento e exibição do troco (se necessário)
      paymentMethodSelect.addEventListener("change", () => {
        if (paymentMethodSelect.value === "Dinheiro") {
          changeContainer.classList.remove("hidden");
        } else {
          changeContainer.classList.add("hidden");
        }
      });

      // Calcular troco
      receivedAmountInput.addEventListener("input", () => {
  const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
  const received = parseFloat(receivedAmountInput.value) || 0;
  const change = received - total;
  changeAmountSpan.textContent = change >= 0 ? `Troco: R$ ${change.toFixed(2)}` : "";
});

finalizeOrderButton.addEventListener("click", () => {
  const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
  const paymentMethod = paymentMethodSelect.value;
  let change = 0;

  if (paymentMethod === "Dinheiro") {
    const received = parseFloat(receivedAmountInput.value) || 0;
    change = received - total;
  }

        // Adicionar o histórico de vendas
        const salesHistory = JSON.parse(localStorage.getItem("salesHistory")) || [];
        const newOrder = {
          date: new Date().toLocaleString(),
          items: cart,
          total: total.toFixed(2),
          paymentMethod,
        };
        salesHistory.push(newOrder);

        // Salvar no localStorage
        localStorage.setItem("salesHistory", JSON.stringify(salesHistory));

        // Copiar para a área de transferência
        copyToClipboard(newOrder);

        // Limpar carrinho e voltar para a tela inicial
        cart = [];
        orderSummaryDiv.classList.add("hidden");
        productListDiv.classList.remove("hidden");

        loadSalesHistory(); // Atualizar o histórico
      });

      // Função para copiar o pedido para a área de transferência
      function copyToClipboard(order) {
  const orderText = `
Pedido: ${order.date}
Itens:
${order.items.map(item => `${item.quantity}x ${item.name} - R$ ${item.price * item.quantity}`).join("\n")}
Total: R$ ${order.total}
Método de Pagamento: ${order.paymentMethod}
`;
  navigator.clipboard.writeText(orderText).then(() => {
    alert("Histórico copiado para a área de transferência!");
  });
}


      // Voltar para a tela de produtos
      backToProductsButton.addEventListener("click", () => {
        productListDiv.classList.remove("hidden");
        orderSummaryDiv.classList.add("hidden");
      });

      // Limpar histórico de vendas
      clearHistoryButton.addEventListener("click", () => {
        if (confirm("Tem certeza que deseja limpar todo o histórico de vendas?")) {
          localStorage.removeItem("salesHistory");
          loadSalesHistory();
        }
      });

      // Copiar histórico completo
      copyHistoryButton.addEventListener("click", () => {
  const salesHistory = JSON.parse(localStorage.getItem("salesHistory")) || [];
  const historyText = salesHistory.map(order => `
Pedido: ${order.date}
Itens:
${order.items.map(item => `${item.quantity}x ${item.name} - R$ ${item.price * item.quantity}`).join("\n")}
Total: R$ ${order.total}
Método de Pagamento: ${order.paymentMethod}
`).join("\n");

  navigator.clipboard.writeText(historyText).then(() => {
    alert("Histórico de vendas copiado para a área de transferência!");
  });
});

    });
  </script>
</body>
</html>